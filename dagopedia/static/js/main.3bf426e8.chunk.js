(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,a){},27:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAACtElEQVRogeWazYuNURzHPzNoyCWJxmSKRAnlWelaWthosLOh/ANWLCw1kyZbbrqGBVsbJVlIibxLpCzIQiQ1eRu5V/cyXhbnPN1x5758z3PPOU/41K+m7u/5nu93nuc559znufCP0OdZbxEwAmwDEmA1sMR+NgW8BJ4A14DLwBfP4/fMEFAGqsAvsarAGWBtDn5nMQCMARX0AM31DThmtXJhGXCjg0HXugOsiJoA2AS87tF4q3pltaMwGCjEzDCDoUPMx1wCoUKkdZvA98xYhBBpjYcKMURvs5Nr1YE1IYKUI4ZIa8J3iAJmFY4dpGLH7kq/GGSnKmipAyeAoj2uYP8u2c9UFgI7HPq7chr9v/gG2NxBK7E9qt4pn0EeiIPWuoRISWyvonnPYw7eiYMed9AsiZqTXhJY6uKgWxw0i6JmzUsCi3oZuEwIBVHzqyKmzlpTDgZVvI6tin0S+zaIfS69H5UmNcgLsW+f2AewV+x77qDZlXH0GzMR9BL0CWTUYw72iIOmC2KnMK4L4i6fQZYDPxwGr2PWiZlblK00tiiqzndgsc8gAI8dDPiqm6o59WYHuOTQ64uLIUTXE/ds/ARWhQgC8ChikOsuxlwuLTBPBmNRDilewGwZQp+Nt8A8F2OuZ6QCnHU8JgsnMVNvUIbRd8NZ6jONJ/gyrmcEzKp8LsNxKiXC7LZbspIwz7g+AEtjhUgZ9WC8uQ5ETWBZgN+H2c9wnKl8sl8wqNZIZO9/0A88bGHKta7GNt6KBPP6LGuIKrAuuus2qN8gW9XBHPy2ZQB4inuI+8CcHPx2pAhMo4eoARtzcSpwFD3IoZw8SswFbtE9xBWybY+iMgy8p32IScxrvL+C3Zivqs0hpoHtOfrKxBFmBzmcq6OM9AHnaYS4gP9fI0WjgHnjdBe3Vw7/L78ByP0EVSkVHdcAAAAASUVORK5CYII="},28:function(e,t,a){e.exports=a.p+"static/media/WikipediaLogo.0df50668.svg"},32:function(e,t,a){e.exports=a(47)},47:function(e,t,a){"use strict";a.r(t);var n=a(30),i=a(9),s=a(8),o=a(17),r=a(10),l=a(18),c=a(1),u=(a(33),a(21),a(50)),d=a(51),g=a(49),h=a(52),p=a(0),m=a.n(p),f=a(23),v=(a(35),a(24)),b=a.n(v),k=a(11);function x(){var e=Object(f.a)(["\n  text-align: left;\n  z-index:2;\n  width: 20rem;\n  height: 11rem;\n  border-radius: 20px;\n  padding: 40px;   \n  background-color: white;\n  opacity: ",";\n  transition: opacity ease 500ms;\n  font-size:120%;\n  line-height: 26pt;\n  @media (max-width: 768px) {\n    width: 20rem;\n    height: 11rem;\n    padding: 20px;   \n  }\n"]);return x=function(){return e},e}var A=[{code:"sv",text:"Svenska \ud83c\uddf8\ud83c\uddea",speachCode:"Swedish Male",startText:"Starta"},{code:"en",text:"English \ud83c\uddec\ud83c\udde7",speachCode:"UK English Male",startText:"Begin"},{code:"fi",text:"Soumi \ud83c\uddeb\ud83c\uddee",speachCode:"Finnish Male",startText:"Alkaa"},{code:"fr",text:"Fran\xe7ais \ud83c\uddeb\ud83c\uddf7",speachCode:"French Female",startText:"D\xe9but"},{code:"es",text:"Espa\xf1ol \ud83c\uddea\ud83c\uddf8",speachCode:"Spanish Male",startText:"Comienzo"},{code:"da",text:"Dansk \ud83c\udde9\ud83c\uddf0",speachCode:"Danish Male",startText:"Start"},{code:"de",text:"Deutsch \ud83c\udde9\ud83c\uddea",speachCode:"Deutsch Male",startText:"Starten"}],w=a.n(k).a.styled(x(),function(e){return e.opacity}),C=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(r.a)(t).call(this,e))).state={isOpen:!1,opacity:0,language:e.language,sound:e.sound},a.toggleModal=a.toggleModal.bind(Object(c.a)(Object(c.a)(a))),a.toggleSound=a.toggleSound.bind(Object(c.a)(Object(c.a)(a))),a.afterOpen=a.afterOpen.bind(Object(c.a)(Object(c.a)(a))),a.beforeClose=a.beforeClose.bind(Object(c.a)(Object(c.a)(a))),a.onSelectChanged=a.onSelectChanged.bind(Object(c.a)(Object(c.a)(a))),a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"onSelectChanged",value:function(e){var t=A.find(function(t){return t.text===e.value});this.setState({language:t}),this.props.onChange(t)}},{key:"toggleModal",value:function(e){this.setState({isOpen:!this.state.isOpen})}},{key:"toggleSound",value:function(e){this.setState({sound:!this.state.sound}),this.props.onChange()}},{key:"afterOpen",value:function(){var e=this;setTimeout(function(){e.setState({opacity:1})})}},{key:"beforeClose",value:function(){var e=this;return new Promise(function(t){e.setState({opacity:0}),setTimeout(t,200)})}},{key:"render",value:function(){return m.a.createElement("div",{className:this.props.className},m.a.createElement(w,{isOpen:this.state.isOpen,afterOpen:this.afterOpen,beforeClose:this.beforeClose,onBackgroundClick:this.toggleModal,onEscapeKeydown:this.toggleModal,opacity:this.state.opacity,backgroundProps:{opacity:this.state.opacity}},m.a.createElement("strong",null," Settings ")," ",m.a.createElement("br",null),this.state.sound?m.a.createElement("span",{style:{cursor:"pointer"},onClick:this.toggleSound,role:"img","aria-label":"soundOn"}," Toggle sound \ud83d\udd0a"):m.a.createElement("span",{style:{cursor:"pointer"},onClick:this.toggleSound,role:"img","aria-label":"soundOff"}," Toggle sound \ud83d\udd07"),m.a.createElement("section",null,"Language:"),m.a.createElement(b.a,{role:"img",value:this.state.language.text,options:A.map(function(e){return e.text}),onChange:this.onSelectChanged})),m.a.createElement("h1",{className:"customTitle",onClick:this.toggleModal},"Dagopedia "))}}]),t}(p.Component),y=a(4),E=a.n(y),O=a(7),S=a.n(O),P=a(27),j=a.n(P),I=a(28),T=a.n(I),M={lat:59.3264264,lng:18.0707082},N=E.a.icon({iconUrl:j.a,iconSize:[40,40],iconAnchor:[12.5,41],popupAnchor:[8,-41]}),B=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(r.a)(t).call(this,e))).updateMarker=function(e){var t=a.mapRef.current;a.setState({marker:{lat:e.lat,lng:e.lon,header:e.title}});var n="https://"+a.state.language.code+".wikipedia.org/w/api.php?action=query&format=json&prop=info%7Cextracts&inprop=url&exintro=1&explaintext=1&origin=*&pageids="+e.pageid;t.leafletElement.flyToBounds([[a.state.position.lat,a.state.position.lng],[e.lat,e.lon]],{padding:[60,60],animate:!0,duration:.7}),fetch(n).then(function(e){return e.json()}).then(function(t){a.state.sound&&window.responsiveVoice.speak(t.query.pages[e.pageid].extract,a.state.language.speachCode),a.setState({wikiText:t.query.pages[e.pageid].extract,url:t.query.pages[e.pageid].fullurl})})},a.mapRef=Object(p.createRef)(),a.state={position:M,marker:M,zoom:1.5,started:!1,haveUserPosition:!1,sound:!1,language:{code:"sv",text:"Svenska \ud83c\uddf8\ud83c\uddea",speachCode:"Swedish Female",startText:"Starta"},visitedPageIds:[],wikiText:"",url:""},a.wikiFetch=a.wikiFetch.bind(Object(c.a)(Object(c.a)(a))),a.goBack=a.goBack.bind(Object(c.a)(Object(c.a)(a))),a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.updatePosition()}},{key:"updatePosition",value:function(){var e=this;navigator.geolocation.watchPosition(function(t){e.setState({position:{lat:t.coords.latitude,lng:t.coords.longitude},haveUserPosition:!0})})}},{key:"onChange",value:function(e){e?this.setState({language:e,visitedPageIds:[]}):(this.state.sound&&window.responsiveVoice.cancel(),this.setState({sound:!this.state.sound}))}},{key:"wikiFetch",value:function(){var e=this,t="&gslimit="+(this.state.visitedPageIds.length+1);this.setState({started:!0});var a="&gscoord="+this.state.position.lat+"|"+this.state.position.lng,i="https://"+this.state.language.code+".wikipedia.org/w/api.php?action=query&prop=&list=geosearch&gsradius=10000&format=json&origin=*";i=i+a+t,fetch(i).then(function(e){return e.json()}).then(function(t){for(var a=[],i=0;i<t.query.geosearch.length;i++)for(var s=0;s<e.state.visitedPageIds.length;s++)t.query.geosearch[i].pageid===e.state.visitedPageIds[s].pageid&&a.push(i);for(var o=0,r=0;r<a.length+1;r++)if(!a.includes(r)){o=r;break}void 0!==t.query.geosearch[o]&&(e.setState({visitedPageIds:[].concat(Object(n.a)(e.state.visitedPageIds),[t.query.geosearch[o]])}),e.updateMarker(t.query.geosearch[o]))})}},{key:"goBack",value:function(){if(!(this.state.visitedPageIds.length<=1)){var e=this.state.visitedPageIds.slice(0,-1);this.setState({visitedPageIds:e}),this.updateMarker(e[e.length-1])}}},{key:"render",value:function(){var e=[this.state.position.lat,this.state.position.lng];return m.a.createElement("div",{className:"pageWrapper"},m.a.createElement(k.ModalProvider,null,m.a.createElement(C,{sound:this.state.sound,language:this.state.language,onChange:this.onChange.bind(this),ref:this.mapRef})),this.state.started?this.state.haveUserPosition?"":m.a.createElement("div",{className:"locationUnavailableTex"}," location unavailable, using default marker "):"",m.a.createElement(u.a,{ref:this.mapRef,className:"map",center:[23.520007,13.404954],zoom:this.state.zoom,zoomControl:!1,minZoom:1.5,maxZoom:18,zoomSnap:.1,id:"your.mapbox.project.id",accessToken:"your.mapbox.public.access.token"},m.a.createElement(d.a,{id:"mapbox.streets",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),this.state.started?m.a.createElement(g.a,{position:e,icon:N},m.a.createElement(h.a,null,m.a.createElement("span",null,"You are here"))):"",this.state.started?m.a.createElement(g.a,{opacity:.5,icon:N,position:[this.state.marker.lat,this.state.marker.lng]},m.a.createElement(h.a,null,m.a.createElement("span",null,this.state.marker.header))," "):""),this.state.started?m.a.createElement("div",null,m.a.createElement("div",{className:"wikiTitleContainer"},m.a.createElement("div",{href:"#",className:"previous",onClick:this.goBack},"\u21a4 "),m.a.createElement("h1",{className:"wikiTitle"},this.state.marker.header),m.a.createElement("div",{href:"#",className:"next",onClick:this.wikiFetch},"\u21a6")),m.a.createElement("section",{style:{textAlign:"left",paddingBottom:"1rem",marginTop:"0.5rem"}},this.state.wikiText),this.state.wikiText&&m.a.createElement("a",{className:"wikiLink",rel:"noopener noreferrer",target:"_blank",href:this.state.url},"  ",m.a.createElement("img",{style:{width:"3rem",height:"3rem"},src:T.a,alt:"Logo"}))):m.a.createElement("div",{className:"item button-hand buttonWrapper"},m.a.createElement("button",{onClick:this.wikiFetch},this.state.language.startText,m.a.createElement("div",{className:"hands"}))))}}]),t}(p.Component);S.a.render(m.a.createElement(B,null),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.3bf426e8.chunk.js.map